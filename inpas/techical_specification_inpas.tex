\documentclass[DIV=calc, paper=a4, fontsize=11pt]{scrartcl} % Документ принадлежит классу article, а также будет печататься в 12 пунктов.
\usepackage{ucs}
\usepackage[T1,T2A]{fontenc}
\usepackage[utf8x]{inputenc} % Включаем поддержку UTF8
\usepackage[russian]{babel} % Пакет поддержки русского языка
\usepackage{titling} % Allows custom title configuration

%for frames
\usepackage{framed}

%For image using
\usepackage{graphicx}

%Numbering subsubsubsections etc
\setcounter{secnumdepth}{5}

%For code highlightning
\usepackage{listings}

%Further enumeration
\usepackage{enumitem}
\setenumerate[1]{label=\theparagraph.\arabic*.}
\setenumerate[2]{label*=\arabic*.}
\setenumerate[3]{label*=\arabic*.}


%For referencing within enumeration lists
\usepackage{enumitem}

%Packages for word-like comment style
\usepackage{todonotes}

%Package for images
\usepackage{float}
\floatstyle{boxed}
\restylefloat{figure}

%For a nicer reference
\usepackage{fancyref}

\usepackage{titlesec}


\titleformat*{\section}{\LARGE\bfseries}
\titleformat*{\subsection}{\Large\bfseries}
\titleformat*{\subsubsection}{\large\bfseries}
\titleformat*{\paragraph}{\large\bfseries}
\titleformat*{\subparagraph}{\large\bfseries}

%For some math formulas if needed
\usepackage{mathtools}

% Some nice visualization
%\usepackage[svgnames]{xcolor} % Enabling colors by their 'svgnames'
\usepackage{fullpage}
%\renewcommand{\headrulewidth}{0.0pt} % No header rule
%\renewcommand{\footrulewidth}{0.4pt} % Thin footer rule
% End visualization

%smart enumeration
\renewcommand{\labelenumi}{\arabic{enumi}.}
\renewcommand{\labelenumii}{\arabic{enumi}.\arabic{enumii}}


% General document settings
% % %
% Accepted file upload formats
\newcommand{\AcceptedFormats}{.txt, .csv, .xls, .xlsx}

\title{Система для учета и контроля товаров Инпас - trackmate (рабочее название)}
\date{14/05/2015}

\begin{document}

\maketitle

\section{Описание проекта}

Данный проект (рабочее название trackmate) представляет собой программное обеспечение - SaaS (Software as a Service), размещенное на сервере/серверах клиента и позволяющее собирать данные об оборудовании, которым обеспечивает заказчик своих клиентов. Данные оборудования хранятся в двух различных базах данных (Oracle, MSSql) и представляют собой складские данные и данные сервисного центра.
\\[0.5cm]
Суть системы состоит в обработке этих данных и предоставления сотрудникам заказчика, а также сотрудникам клиентов заказчика отчетов на основе собранных данных. Отчеты должны генерироваться как в онлайн (в окне браузера), так и быть доступными для скачивания.

\subsection{Описание для клиента-банка}
Пользователь (сотрудник) банка, который является клиентом заказчика, может просматривать все данные системы, но ограничен диапазоном только своего банка и правами доступа внутри своего банка. Так, региональный представитель видит все филиалы региона (но не видит другие регионы), а главный директор видит все регионы.

\subsection{Описание для заказчика}
Пользователь (сотрудник) фирмы заказчика видит все товары и все банки и может строить отчеты по всем данным.

\section{Технические уточнения}

\subsection{Терминология}
        
        \begin{itemize}
        \item Блок - некий визуальный элемент, выделяющийся либо графически (в виде рамок, очертаний), либо по смыслу (совокупность похожих элементов)
        \item Компонент - часть содержания, имеющего закрытое визуально представление. Одна страница сайта может состоять из нескольких компонентов.
        \item Фронтэнд - для пользователя видимая оболочка веб-страницы
        \item Бэкэнд - невидимые для пользователя математические алгоритмы
        \item CMS - все работы происходят на основе системы управления содержанием - CMS 1C Bitrix (1С Битрикс)
        \item Модуль - является описанием общего функционала, который не может быть классифицирован как привязанный к определенной странице. Он может встречаться на любой странице в любом месте. Модуль может состоять из нескольких компонентов. Также модуль может содержать в себе части логики фронтэнда и бэкэнда.
        \item Хэдер - верхняя часть сайта, обладающая определенной структурой, которая видна сквозняком на всех или почти всех страницах сайта. Также используется обозначение "шапка".
        \item Футер - нижняя часть сайта. Функционал аналогичен хэдеру. Также используется обозначение "подвал".
    \end{itemize}
    
\subsection{Технические требования}
Для работоспобности системы Trackmate её необходимо установить на unix-машине с настроенным apache2 или nginx сервером.
Для удобства администрирования также рекомендуется использовать phpMyAdmin.
\\[0.5cm]
Минимальная конфигурация сервера:
\begin{itemize}
	\item 512 мегабайт оперативной памяти
	\item 1-ядерный процессор
	\item 1500 мегагерц тактовой частоты
	\item 15000 килобайт процессорного кеша
\end{itemize}


\section{Модули}

\subsection{Товары}

Данный модуль хранит в себе данные о товаре, которые в свою очередь получается из двух баз данных заказчика (бд сервисного центра и бд склада). Система trackmate не производит никаких действий с этими данными (read-only). Обмен данных происходит с определенной периодичностью (на усмотрение разработчика).
\\[0.5cm]
Поля таблицы сервис:

\begin{itemize}
	\item T1.dbid - идентификатор
	\item T4.device-name - название устройства
	\item T3.fault-name - наименование неисправности
	\item T2.equipment-owner - владелец оборудования (клиент)
	\item T1.serial-number - серийный номер терминала
	\item T1.submit-date - дата отправки клиенту после ремонт
	\item T1.main-status - текущее состояние оборудование по сервису
	\item T42.action-timestamp - дата получения в ремонт
	\item T1.service-operation1 - Работы выполненные по ремонту оборудования
	\item T1.service-operation2
	\item T1.service-operation4
	\item T1.service-operation3
	\item T1.service-operation5
	\item T1.service-operation6
\end{itemize}

Поля таблицы склад:

\begin{itemize}
	\item 
\end{itemize}

\subsubsection{Технология обмена}
Данные на стороне сервиса trackmate хранятся в одной таблице и забираются посредством запросов к RESTful API заказчика либо посредством прямых SQL запросов. \todo[inline]{Обязательно нужно решить!}

\subsection{Банки}

Данный модуль хранит в себе данные о банках. \todo[inline]{Необходимо уточнить, где есть ли у клиента также эти данные или необходимо хранить на стороне трекмейта}


\section{Страницы}

\subsection{Главная}

Главная страница состоит из навигационного меню, центральной навигации и блока, информирующего пользователя о последних изменениях.

\subsubsection{Навигационное меню}

Состоит из:
\begin{itemize}
	\item Логотипа программного обеспечения
	\item Ссылки на root
	\item Ссылки на подразделения
	\item Настройки
	\item (опционально) - Коротких данный авторизованного пользователя
\end{itemize}

\subsubsection{Центральная навигация}
Состоит из трех больших элементов:
\begin{itemize}
	\item Первый - ведет на страницу поиска по (банковским) подразделениям
	\item Второй - ведет на страницу поиска по аппарату
	\item Третий - ведет на страницу построения отчета
\end{itemize}

\subsubsection{Блок истории}
Данный блок отображает построчно следующую информацию:
\begin{itemize}
	\item Изображение аппарата
	\item (опционально) Модель аппарата
	\item Серийный номер товара
	\item Действие, произведенное с товаром (например: "был отгружен на склад")
	\item Место конечного действия (например: "Склад №5")
	\item Остаток гарантийного срока (например: "остаток гарантии - 52 дня")
\end{itemize}

Таким образом примерная строка может выглядеть вот так:
(картинка) Аппарат GF 120, серийный номер 822 131 512 был отгружен на склад "Склад №5", остаток гарантии - 52 дня

\subsection{Подразделения}
Данная страница состоит из двух смысловых блоков - фильтры и результат фильтров.

\subsubsection{Фильтры}
Блок является одной общей формой, состоящей из следующих полей:
\begin{itemize}
	\item Поисковая строка, поддерживающая саджест и принимающая параметры: банк, регион банка, филиал банка
	\item Выпадающий список с наименованиями банка (данный элемент доступен только сотрудникам компании заказчика)
	\item Выпадающий список с регионами банков (данный элемент также доступен и сотруднику банка-клиента, если пользователь обладает соответствующими правами, например генеральный директор)
	\item Выпадающий список с филиалами банка (данный элемент также доступен и сотруднику банка-клиента, например региональному директору)
	\item Кнопка "найти", осуществляющая form action 
\end{itemize}

\subsubsection{Результат фильтров}
По умолчания в данном блоке (до ввода параметров в фильтре) отображаются все отделения банков (присутствует пагинация, если элементов много). Отделения также автоматически фильтруются в зависимости от прав пользователя - если это сотрудник ИНПАС, то в блоке выводятся все банки, если клиент - то в зависимости от должности соответствующие банки.
\\[0.5cm]
После передачи параметров фильтра данная область должна отображать список банков, соответстующих запросу фильтра.

\paragraph{Страница подразделения}
На данной странице выводятся:

\begin{itemize}
	\item Название подразделения
	\item Логотип или иная фотография банка
	\item "Материнское" подразделение банка
	\item Кол-во аппаратов ИНПАС в обороте
	\item Дата последнего обращения
	\item Ответственный за подразделение банка менеджер
\end{itemize}

Далее следует блок, состоящий из двух частей - последние изменения аппаратов банка, которые находятся на сервисном обслуживании, состоящий из 10 позиций (цифра вариируется). Выводится:

\begin{itemize}
	\item Дата события
	\item Серийный номер аппарата
	\item Марка аппарата
	\item Тип события (аппарат получен сервисным центром, проблема диагностицирована, проблема на рассмотрении, аппарат ремонтируется...)
\end{itemize}

Вторая часть - сводный отчет. Отображает:


\begin{itemize}
	\item Поля для выбора даты (от) и (до) - выбирает дата фактической отгрузки (продажи) аппарата клиенту
	\item Вывод количества аппаратов, которые в выбранное время снимаются с гарантии до истечения гарантийного срока.
	\item Тип оборудования
	\item Кол-во оборудования данного типа, находящегося под контролем банка
\end{itemize}

\subsection{Поиск по аппарату}
Данная страница позволяет искать по одному или нескольким серийным номерам одновременно. Поиск возможен по поисковой строке, которая поддерживает мультивыбор и саджест. Также присутствует возможность загрузить файл, состоящий из списка серийных номеров (поддерживаются форматы \AcceptedFormats)
\\[0.5cm]
По умолчанию показываются последние 10 изменений во всех аппаратах компании (цифра вариируется). Таблица с изменениями состоит из следующих значений:

\begin{itemize}
	\item Дата события
	\item Описание события (поступил в оборот банка, возвращен из сервисного центра, поступил в сервисный центр...)
	\item Марка и серийный номер аппарата
	\item Название подразделения клиента
\end{itemize}

После ввода данных поиска пользователю отображается таблица всех аппаратов, соответствующих выбранной марки. При этом вид таблицы для этой марки меняется на следующий:

\begin{itemize}
	\item Серийный номер
	\item Где находится аппарат сейчас
	\item Срок истечения гарантии
	\item Возможные действия (просмотреть)
\end{itemize}

\subsubsection{Страница аппарата}
После нажатия на "просмотреть" на предыдущей странице пользователь попадает в карточку аппарата. Также в карточку пользователь может попасть, если введет в поисковой строке на предыдущей странице сразу конкретный серийный номер.
\\[0.5cm]
Карточка товара состоит из двух основных блоков, общей информации:

\begin{itemize}
	\item Серийного номера аппарата
	\item Изображения аппарата
	\item Модельный ряд
	\item Текущий клиент (владелец)
	\item Дата выдачи
	\item Срок гарантии
	\item Ответственный менеджер
\end{itemize}

А также из истории аппарата, которая отображается в табличном виде и имеет следующую структуру:

\begin{itemize}
	\item Дата события
	\item Описание события
\end{itemize}

Также в карточке товара пользователь может скачать данные для отчета. Этим происходит скачивание xlsx-файла, который содержит в себе построчно всю общую информацию, а также историю аппарата.


\subsection{Отчеты}
На данной странице пользователь может выбрать из 6 различных типов отчетов.

\subsubsection{Отчет по банку}
На данной странице доступны настройки для формирования необходимого отчета по искомому филиалу банка. Пользователь может пользоваться следующими фильтрами:

\begin{itemize}
	\item Наименование банка (поле является списком, который принимает текстовый ввод)
	\item Наименование филиала (поле является списком, который принимает текстовый ввод)
	\item Модель аппарата (список, мультивыбор)
	\item Поле свободного ввода, которое принимает серийные номера (с саджестом), можно через запятую вносить несколько
	\item Два выбора даты (по два поля в каждом, "от" и "до") - дата отгрузки и срок гарантии
\end{itemize}
\todo[inline]{Необходимо уточнить, что будет происходить при нажатии на кнопку "сгенерировать отчет"!}

\subsubsection{Отчет по заданному номеру счета}
Страница делится на два блока - блок поискового запроса и блок поискового результата.
\paragraph{Блок поискового запроса}
Форма поискового запроса имеет два элемента:

\begin{itemize}
	\item Поле для ввода номера счета - ищет по всем номерам счетов, поддерживает мультивыбор и саджест
	\item Кнопка "найти" - передает в поисковый запрос параметры предыдущего поля
\end{itemize}

\paragraph{Блок поискового результата}
В данном блоке видна быстрая сводка:

\begin{itemize}
	\item Номер (номера) счета (счетов)
	\item Наименование клиента
	\item Кнопка "скачать отчет в формате .xlsx - позволяет скачать все данные, которые видит пользователь в браузере себе на рабочий стол компьютера
\end{itemize}

Далее следует табличный вид результатов поискового запроса, состоящих из следующих полей:

\begin{itemize}
	\item Порядковый номер
	\item Наименование оборудования
	\item Серийный номер оборудования
	\item Дата отгрузки оборудования
	\item Срок действия гарантии
	\item Статус по сервису - если таковой имеется, если нет - видна заглушка N/A
\end{itemize}


\subsubsection{Отчет по отгруженному оборудованию}

Страница делится на два блока - блок поискового запроса и блок поискового результата.
\paragraph{Блок поискового запроса}
Форма поискового запроса имеет пять элементов:

\begin{itemize}
	\item Поле для ввода наименования банка - поддерживает мультивыбор и саджест
	\item Поле для ввода филиала банка - поддерживает мультивыбор и саджест
	\item Поле для ввода даты начала искомого периода (дата отгрузки) - стандартный datepicker
	\item Поле для ввода даты окончания искомого периода (дата отгрузки) - стандартный datepicker
	\item Кнопка "найти" - передает в поисковый запрос параметры предыдущего поля
\end{itemize}

\paragraph{Блок поискового результата}
В данном блоке видна быстрая сводка:

\begin{itemize}
	\item Выбранный период времени
	\item Наименование клиента
	\item Кнопка "скачать отчет в формате .xlsx - позволяет скачать все данные, которые видит пользователь в браузере себе на рабочий стол компьютера
\end{itemize}

Далее следует табличный вид результатов поискового запроса, состоящих из следующих полей:

\begin{itemize}
	\item Порядковый номер
	\item Наименование оборудования
	\item Серийный номер оборудования
	\item Дата отгрузки оборудования
	\item Срок действия гарантии
	\item Номер счета, по которому оборудование прошло
	\item Статус по сервису - если таковой имеется, если нет - видна заглушка N/A
\end{itemize}

%% Новый отчет - деление
\subsubsection{Отчет по оборудованию в сервисе}

Страница делится на два блока - блок поискового запроса и блок поискового результата.
\paragraph{Блок поискового запроса}
Форма поискового запроса имеет пять элементов:

\begin{itemize}
	\item Поле для ввода наименования банка - поддерживает мультивыбор и саджест
	\item Поле для ввода филиала банка - поддерживает мультивыбор и саджест
	\item Поле для ввода даты начала искомого периода (дата поступления оборудования в сервисный центр) - стандартный datepicker
	\item Поле для ввода даты окончания искомого периода (дата поступления оборудования в сервисный центр) - стандартный datepicker
	\item Кнопка "найти" - передает в поисковый запрос параметры предыдущего поля
\end{itemize}

\paragraph{Блок поискового результата}
В данном блоке видна быстрая сводка:

\begin{itemize}
	\item Выбранный период времени
	\item Наименование клиента
	\item Кнопка "скачать отчет в формате .xlsx - позволяет скачать все данные, которые видит пользователь в браузере себе на рабочий стол компьютера
\end{itemize}

Далее следует табличный вид результатов поискового запроса, состоящих из следующих полей:

\begin{itemize}
	\item Порядковый номер
	\item Наименование оборудования
	\item Серийный номер оборудования
	\item Дата отгрузки оборудования
	\item Срок действия гарантии
	\item Номер счета, по которому оборудование прошло
	\item Статус по сервису - здесь обязателен, так как показывается только оборудование, которое в сервисе
\end{itemize}


%% Новый отчет - деление
\subsubsection{Отчет по серийным номерам}

Страница делится на два блока - блок поискового запроса и блок поискового результата.
\paragraph{Блок поискового запроса}
Форма поискового запроса имеет три элемента:

\begin{itemize}
	\item Поле для ввода серийного номера  - поддерживает мультивыбор и саджест
	\item Форма для загрузки файла, состоящего из списка серийных номеров (поддерживаются форматы \AcceptedFormats)
	\item Кнопка "найти" - передает в поисковый запрос параметры предыдущего поля
\end{itemize}

\paragraph{Блок поискового результата}
В данном блоке видна быстрая сводка:

\begin{itemize}
	\item Выбранный(е) серийный(е) номер(а)
	\item Кнопка "скачать отчет в формате .xlsx - позволяет скачать все данные, которые видит пользователь в браузере себе на рабочий стол компьютера
\end{itemize}

Далее следует табличный вид результатов поискового запроса, состоящих из следующих полей:

\begin{itemize}
	\item Порядковый номер
	\item Наименование банка - видно только внутренним менеджерам ИНПАС
	\item Наименование оборудования
	\item Серийный номер оборудования
	\item Дата отгрузки оборудования
	\item Срок действия гарантии
	\item Номер счета, по которому оборудование прошло
	\item Статус по сервису - здесь обязателен, так как показывается только оборудование, которое в сервисе
\end{itemize}


%% Новый отчет - деление
\subsubsection{Отчет по всем ремонтам клиента} 
Данный отчет позволяет просматривать все заявки на ремонт одного или нескольких клиентов.
\\[0.5cm]
Страница делится на два блока - блок поискового запроса и блок поискового результата.
\paragraph{Блок поискового запроса}
Форма поискового запроса имеет два элемента:

\begin{itemize}
	\item Поле для ввода наименования банка-клиента  - поддерживает мультивыбор и саджест
	\item Кнопка "найти" - передает в поисковый запрос параметры предыдущего поля
\end{itemize}

\paragraph{Блок поискового результата}
В данном блоке видна быстрая сводка:

\begin{itemize}
	\item Наименование банка-клиента
	\item Кнопка "скачать отчет в формате .xlsx - позволяет скачать все данные, которые видит пользователь в браузере себе на рабочий стол компьютера
\end{itemize}

Далее следует табличный вид результатов поискового запроса, состоящих из следующих полей:

\begin{itemize}
	\item Идентификатор клиента
	\item Наименование оборудования
	\item Серийный номер оборудования
	\item Наименование неисправности
	\item Дата поступления в сервис
	\item Дата отправки оборудования обратно клиенту
	\item Статус по сервису - здесь обязателен, так как показывается только оборудование, которое было или есть в сервисе
\end{itemize}

\subsection{Настройки}

На данной странице доступны настройки прав доступа и настройки отчетов.

\subsubsection{Права доступа}

Страница делится на две закладки - пользователи и группы пользователей.

\paragraph{Пользователи}

По умолчанию виден список всех пользователей системы в табличном формате и кнопка "добавить нового пользователя". Столбцы таблицы следующие:

\begin{itemize}
	\item Логин пользователя
	\item ФИО
	\item В каких группах состоит
	\item Действия (просмотреть, редактировать, удалить)
\end{itemize}

\paragraph{Группы пользователей}
Группы пользователей делятся на две категории - на уровни доступа внутри компании и на компанию. Так, например, пользователь может состоять одновременно в группе "топ-менеджмент" и "Сбербанк". Таким образом он будет видеть только данные Сбербанка в соответствии с теми правами, которые будут установлены группе "топ-менеджмент" (например он будет видеть все филиалы, в то время как "региональный директор" будет видеть только филиалы своего региона).
\\[0.5cm]
По умолчанию виден список всех групп в табличной форме, а также кнопка "добавить новую". Список столбцов таблицы:

\begin{itemize}
	\item Наименование группы
	\item Описание
	\item Действия (просмотреть, редактировать, удалить)
\end{itemize}

\section{Пользовательские истории}

\begin{framed}
\subsection{Сотрудник компании ИНПАС - Оберин Мартелл}
По адресу http://trackmate.ru (точный адрес может варьировать) Оберин открывает форму логина. Введя данные своей учетной записи он попадает на главную страницу, на которой ему доступны следующие действия:
\begin{itemize}
	\item Поиск по подразделениям
	\item Поиск по товару
	\item Отчеты
\end{itemize} 	
Также он видит 10 последних действий в рамках всех банков и всех аппаратов.

\subsubsection{Поиск по подразделению}
Здесь Оберин может выбрать банк (наименование банка) и конкретный регион банка. По умолчанию на этой странице он видит перечень всех банков и всех филиалов, отсортированных по последней активности. Если он задал в поисковой форме определенные запросы, то в блоке результата он видит все филиалы банка, которые соответствуют поисковому запросу.
\\[0.5cm]
Далее, зайдя на страницу конкретного филиала, Оберин видит короткую информацию про сам филиал, список действий и последние изменения в оборудовании банка, которое находится в сервисном центре.
Также он может просмотреть сводную информацию об оборудовании банка, включающую в себя - кол-во оборудования по типу и кол-во аппаратов, снятых с гарантии в определенный период (для управления этим периодом он может воспользоваться соответствующими конроллами)

\subsubsection{Поиск по товару}
На данной странице Оберин может внести в поисковую строку один или несколько серийных номеров товаров.
\end{framed}




\end{document}