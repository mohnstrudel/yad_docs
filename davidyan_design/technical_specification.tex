\documentclass[DIV=calc, paper=a4, fontsize=11pt]{scrartcl} % Документ принадлежит классу article, а также будет печататься в 12 пунктов.
\usepackage{ucs}
\usepackage[T1,T2A]{fontenc}
\usepackage[utf8x]{inputenc} % Включаем поддержку UTF8
\usepackage[russian]{babel} % Пакет поддержки русского языка
\usepackage{titling} % Allows custom title configuration

%for frames
\usepackage{framed}

%For image using
\usepackage{graphicx}

%Numbering subsubsubsections etc
\setcounter{secnumdepth}{5}

%For code highlightning
\usepackage{listings}

%for nice ruby highlight
\lstloadlanguages{Ruby}
\lstset{%
basicstyle=\ttfamily\color{black},
commentstyle = \ttfamily\color{red},
keywordstyle=\ttfamily\color{blue},
stringstyle=\color{orange}}

%Further enumeration
\usepackage{enumitem}
\setenumerate[1]{label=\theparagraph.\arabic*.}
\setenumerate[2]{label*=\arabic*.}
\setenumerate[3]{label*=\arabic*.}


%For referencing within enumeration lists
\usepackage{enumitem}

%Packages for word-like comment style
\usepackage{todonotes}

%Package for images
\usepackage{float}
\floatstyle{boxed}
\restylefloat{figure}

%For a nicer reference
\usepackage{fancyref}

\usepackage{titlesec}

\usepackage{xcolor}

% For nice JSON output 
\colorlet{punct}{red!60!black}
\definecolor{background}{HTML}{EEEEEE}
\definecolor{delim}{RGB}{20,105,176}
\colorlet{numb}{magenta!60!black}

\lstdefinelanguage{json}{
    basicstyle=\normalfont\ttfamily,
    numbers=left,
    numberstyle=\scriptsize,
    stepnumber=1,
    numbersep=8pt,
    showstringspaces=false,
    breaklines=true,
    frame=lines,
    backgroundcolor=\color{background},
    literate=
     *{0}{{{\color{numb}0}}}{1}
      {1}{{{\color{numb}1}}}{1}
      {2}{{{\color{numb}2}}}{1}
      {3}{{{\color{numb}3}}}{1}
      {4}{{{\color{numb}4}}}{1}
      {5}{{{\color{numb}5}}}{1}
      {6}{{{\color{numb}6}}}{1}
      {7}{{{\color{numb}7}}}{1}
      {8}{{{\color{numb}8}}}{1}
      {9}{{{\color{numb}9}}}{1}
      {:}{{{\color{punct}{:}}}}{1}
      {,}{{{\color{punct}{,}}}}{1}
      {\{}{{{\color{delim}{\{}}}}{1}
      {\}}{{{\color{delim}{\}}}}}{1}
      {[}{{{\color{delim}{[}}}}{1}
      {]}{{{\color{delim}{]}}}}{1},
}


\titleformat*{\section}{\LARGE\bfseries}
\titleformat*{\subsection}{\Large\bfseries}
\titleformat*{\subsubsection}{\large\bfseries}
\titleformat*{\paragraph}{\large\bfseries}
\titleformat*{\subparagraph}{\large\bfseries}

%For some math formulas if needed
\usepackage{mathtools}

% Some nice visualization
%\usepackage[svgnames]{xcolor} % Enabling colors by their 'svgnames'
\usepackage{fullpage}
%\renewcommand{\headrulewidth}{0.0pt} % No header rule
%\renewcommand{\footrulewidth}{0.4pt} % Thin footer rule
% End visualization

%smart enumeration
\renewcommand{\labelenumi}{\arabic{enumi}.}
\renewcommand{\labelenumii}{\arabic{enumi}.\arabic{enumii}}


% General document settings
% % %
% Accepted file upload formats
\newcommand{\AcceptedFormats}{.txt, .csv, .xls, .xlsx}

\title{Техническое задание на разработку интернет-магазина}

\date{27/07/2016}

\begin{document}

\maketitle

\section{Описание проекта}
Рабочее название проекта - Davidian Design. Проект представляет собой информационно-имиджевый сайт о бренде с функцией интернет-магазина.

\subsection{Цели сайта для клиента}

Клиенты могут получать информацию о сайте, а также совершать покупки.
Клиенты также могут просматривать актуальные предложения, подборки (главная страница), могут просматривать и фильтровать общи каталог товаров (страница каталога), просматривать страницу конкретного товара, добавлять его в корзину и/или в вишлист (карточка товара). Далее клиент может оформить заказ (страница корзины) и просматривать историю заказов (личный кабинет).
Иностранные клиенты могут просматривать информацию на своем языке. 

\subsection{Цели сайта для заказчика}

Данный проект имеет несколько целей.
\begin{itemize}
	\item Позиционирование бренда (формирование представления о бренде - кто мы, что делаем, как давно, и тд) - достигается за счет предоставления информации о бренде в текстовом и визуальном формате.
	\item Повышение узнаваемости бренда
	\item Онлайн магазин - целью является удобное управление каталогом, заказами и информационным контентом.
\end{itemize}
Сайт дает заказчику возможность принимать оплату за товары (подключение Cloudpayments), следить за заказами (админка - заказы), следить и управлять каталогом товаров (админка - каталог). Помимо стандартного управления товарами (добавлять/редактировать), заказчик может отметить товар как "горячий". В таком случае товар попадет в слайдер на главной странице.
\\[0.5cm]
Дополнительно товару можно присвоить тэги и создать группы товаров на основе тэгов. Например можно костюму присвоить тэг "для свадьбы" и создать группу на основе всех товаров с данным тэгом. Эта группа будет выводиться на главной, а также будет доступна в верхнем меню.


\section{Технические уточнения}

\subsection{Термины}

        \begin{itemize}
        \item Блок - некий визуальный элемент, выделяющийся либо графически (в виде рамок, очертаний), либо по смыслу (совокупность похожих элементов)
        \item Компонент - часть содержания, имеющего закрытое визуально представление. Одна страница сайта может состоять из нескольких компонентов.
        \item Фронтэнд - для пользователя видимая оболочка веб-страницы
        \item Бэкэнд - невидимые для пользователя математические алгоритмы
        \item CMS - все работы происходят на основе системы управления содержанием - CMS 1C Bitrix (1С Битрикс)
        \item Модуль - является описанием общего функционала, который не может быть классифицирован как привязанный к определенной странице. Он может встречаться на любой странице в любом месте. Модуль может состоять из нескольких компонентов. Также модуль может содержать в себе части логики фронтэнда и бэкэнда.
        \item Хэдер - верхняя часть сайта, обладающая определенной структурой, которая видна сквозняком на всех или почти всех страницах сайта. Также используется обозначение "шапка".
        \item Футер - нижняя часть сайта. Функционал аналогичен хэдеру. Также используется обозначение "подвал".
        \item Администраторская панель ("админка") - часть сайта, скрытая для обычных пользователей, позволяющая редактировать содержимое сайта
        \item Публичная часть ("паблик") - часть сайта, доступная для просмотра обычным пользователям.
        \item Слайдер - блок с фотографиями и (опционально) текстом, которые можно листать (влево/вправо). Обычно размещается в верхней части страницы и занимает всю ширину экрана. Также возможны более узкие слайдеры.

    \end{itemize}
    
\subsection{Технические требования к сайту}
Сайт располагается на хостинге или выделенном сервере (virtual dedicated server), в зависимости от предпочтений заказчика.



\section{Архитектура проекта}

\subsection{Общее}

Проект изначально должен соблюдать правила объектно ориентированного программирования. Т.е. любой пользователь должен быть объектом класса "пользователь". Это распространяется на все сущности. Все действия системы должны быть методами своих классов. Псевдокод:
\begin{lstlisting}[language=Ruby]

#Class description

class User < ActiveRecord::Base 

def initialize(name, phone, mail)
	@name = name
	@phone = phone
	@mail = mail
end

# Register method
def register(user_params)
	User.create(user_params)
end

# Allow only whitelisted params
private
	def user_params
		params.require(:user).permit(:name, :phone, :mail)
	end
\end{lstlisting}

Программирование должно осуществляться по подходу TDD - test driven development. Это означает, что перед написанием функционала необходимо написать тест (который заведомо провалится, так как функционала нет). Далее пишется минимальный функционал, который позволяет пройти данный тест.
\\[0.5cm]
Псевдокод теста:
\begin{lstlisting}[language=Ruby]
require 'user'
	
Rspec.describe User, "#register" do
  context "when user is completely new" do
	it "creates a new entry with valid data" do
	  user = User.new
      user.name = "Vasya Pupkin"
	  user.phone = "8 903 227 88 74"
	  user.mail = "vasya@pupkin.ru"
	  user.register
				
	  expect(User.count).to change{User.count}.by(1)
	end
    it "does not create a new entry with invalid data" do
      user = User.new
	  user.name = "Vasya Pupkin"
	  user.phone = "j1lkh3i1u2y98"
	  user.mail = "someinvalidtext"
	  user.register	
		
      expect(User.count).not_to change{User.count}.by(1)
	end
  end
end
\end{lstlisting}
Т.е. в данном случае мы тестируем создание нового пользователя с валидными данными (первый случай) и с невалидными данными. В первом случае мы ожидаем увеличение общего кол-ва пользователей на 1, во втором случае мы не ожидаем увеличений.

\subsection{Модели}
Общее описание - есть каталог товаров, товары разделены по категориям.

\begin{itemize}
	\item Категория
	\item Товар - помимо стандартных битриксовых полей нужны следующие поля: Тэг
	\item Товарное предложение - помимо стандартных битриксовых полей нужны следующие поля: Ткань
	\item Заказ
	\item Корзина
	\item Подборка (или коллекция) - содержит товары с определенным тэгом. Подборке можно задавать активность, картинку, описание и перечень товаров. Также подборку можно прикреплять к определенной категории (опционально)
\end{itemize}

\subsubsection{Структура моделей}

Товар принадлежит одной категории. У товара может быть несколько товарных предложений. Также у товара может быть один или несколько тэгов. На основе тэгов можно группировать товары. Тэги могут быть самые разные, например, описывать событие ("Для свадьбы", "для выпускного" или по любому другому признаку - "с глубоким вырезом")
\begin{framed}
Пример
\\[0.5cm]
Есть товар "платье". Она может относиться к категории "вечернее платье". У данного платья есть несколько товарных предложений - конкретный размер и цвет (XXXL может стоить дороже, чем XS). У данного товара есть тэг "скрываем лишние килограммы", таким образом, например, в подборке на главной "платья, которые скроют лишние килограммы" данное платье попадет.
\end{framed}

\subsection{Языки}
Сайт должен быть мультиязычным. При этом языки должны настраиваться внутри админ-панели. Соответственно при добавлении языка админ должен загрузить флаг языка и его описание на русском, английском и родном языке (т.е. для финского это должно быть "финский", "finnish", "Føroyskt"). При добавлении нового языка все поля в карточках товаров и на статичных страницах должны дублироваться для соответствующего языка. Т.е. в карточке товара описание и название должно быть в трех экземплярах, если языков три.


%% New Section
\section{Модули}

\subsection{Оплата}
Необходимо встроить прием онлайн-оплаты через агрегатор "CloudPayments". При успешной оплате формируется заказ и клиент перенаправляется на соответствующую success-страницу.

\subsection{Скидки}
Необходимо иметь возможность управлять скидками для товаров.

\subsection{Доставка}\label{subsec:delivery}
Для расчетов всех операций, связанных с доставкой подключается модуль "Yadadya Post". Данный модуль позволяет владельцу интернет-магазина создавать накладные, формировать чеки, проверять статус посылки и расчитывать стоимость доставки.

%% New Section
\section{Страницы}

\subsection{Структура страниц}

\subsubsection{Верхнее меню}


Состоит из следующих элементов:
\begin{itemize}
	\item Коллекции
	\item Женская одежда
	\item Мужская одежда
	\item Аксессуары
	\item Ювелирные изделия 
	\item Онлайн магазин
\end{itemize}

Таким образом первый пункт меню представляет собой страницу, на которой отображаются наборы тэгов. Пункты 2...N-1 представляют собой категории. Пункт N представляет собой весь каталог. Пункты меню должны быть вариабельными, т.е. если добавляется новая категория (например "детская одежда"), то эта категория должна появляться в меню.
\\[0.5cm]
Также в верхнем меню доступна форма поиска и форма смены языка.

\subsubsection{Нижнее меню}
Состоит из равномерно распределенных блоков (например col-md-4, col-md-4, col-md-4). 
\\[0.5cm]
Первый блок:
\begin{itemize}
	\item О бренде - статичная страница
	\item Новости (пресса) - ссылка на страницу типа "blog"
	\item Конфиденциальность (Privacy & Cookie Policy) - статичная страница
	\item Контакты - ссылка на страницу типа "contact", с картой, формой обратной связи и текстовыми данными компании (адрес, телефон)
	\item Вопросы и ответы - отдельная страница FaQ
\end{itemize}

Второй блок:
\begin{itemize}
	\item Онлайн магазин (доставка, корзина, соглашение пользователя и тд)
\end{itemize}

Третий блок:
\begin{itemize}
	\item Соц.сети
	\item Форма подписки на рассылку
\end{itemize}

\subsection{Главная}
Главная страница состоит из следующих блоков:
\begin{itemize}
	\item Слайдер - создается как отдельный элемент в админке. Имеет фотографию, описание, заголовок и ссылку, куда клиент попадает, нажав на заголовок или описание. Для ссылки параметр нужно делать не произвольный, а селект из категорий и коллекций/подборок.
	\item Перечень подборок (соответственно в админке должна быть возможность создать подборку товаров, задать ей период активности, выбрать тэги из списка тэгов, по которым в эту подборку попадут товары)
\end{itemize}

\subsection{Странца категории}
\begin{itemize}
	\item Перечень подборок данной категории с возможностью перехода на товары данной подборки
\end{itemize}


\subsection{Список товаров}
Список товаров представляет собой перечень товаров определенной категории с короткой информацией о каждом товаре (превью). Товары можно фильтровать по следующим параметрам:

\begin{itemize}
	\item Цена (ползунок)
	\item Цвет - тайлы с цветом
	\item Тэги
	\item Событие
\end{itemize}

\subsection{Карточка товара}
Вывод информации в соответствии с шаблоном. На карточке товара перечислены следующие свойства товара:

\begin{itemize}
	\item Название товара
	\item Фотографии товара - обязательно с функцией zoom
	\item Размер одежды - переключатели между товарными предложениями
	\item Цвет одежды - переключатели между товарными предложениями
	\item Цена товара
	\item Описание товара
	\item Сопутствующие товары
\end{itemize}

Также в карточке товара необходимо вывести элементы социального sharing'а. Соответствующим образом должны оформляться open graph тэги конкретных страниц (т.е. в og-image должна попадать фотография товара, в og-tile название товара и в og-description описание товара). Аналогично для твиттера и вконтакте.

\subsection{Корзина (оформление заказа)}
В корзине пользователь может просмотреть все свои товары, которые он положил в корзину, отредактировать количество и удалить позиции. При вводе контактных данных для доставки пользователь может оформить заказ выбрав способ оплаты и доставки.
\\[0.5cm]
Для оформления заказа достаточно следующих полей от пользователя:
\begin{itemize}
	\item телефон (обязательно)
	\item электронная почта (обязательно)
	\item адрес (страна, город, индекс, улица, дом, квартира) - опционально, может уточнить и менеджер при повторном звонке.
\end{itemize}

Также при оформлении заказа у клиента должна быть возможность ввести промокод. ИМ должен поддерживать систему промокодов (они должны управляться в админке через блок "управление маркетингом" - "купоны скидок на товар").
\\[0.5cm]
Если клиент вводит адрес, то на основе модуля "доставка" (см. пункт \ref{subsec:delivery}) рассчитывается стоимость доставки и выводится клиенту.

\subsection{Личный кабинет пользователя}
Дефолтно пользователь попадает на страницу с персональными данными. Если у него есть актуальный заказ, то статус данного заказа (см. пункт \ref{subsec:delivery}) выводим сверху по центру.

\subsubsection{Персональные данные}
Перечень полей, которые пользователь может изменить. При первичном оформлении заказа (если клиента нет в базе) на почту клиенту приходит пароль, с которым он сможет авторизоваться и в будущем на сайте ИМ. Поля следующие:
\begin{itemize}
	\item ФИО (отдельные поля)
	\item Адрес (отдельные поля)
	\item Электронная почта
	\item Телефон
	\item Пароль
\end{itemize}

\subsubsection{История покупок}
Подстраница с перечнем всех покупок. Табличный вид заказов, состоящий из следующих полей:
\begin{itemize}
	\item Дата заказа
	\item Сумма заказа
	\item Статус доставки
	\item Статус оплаты
	\item Перечень товаров (если слишком много, то делаем truncate и показываем полный перечень при наведении мышкой)
\end{itemize}

\subsection{Типовые страницы}

\begin{itemize}
	\item Контакты - необходимо подгружать из настроек магазина ("реквизиты ИМ" или блок "печатные формы")
	\item Доставка - текстовая страница, также отображается перечень активных услуг, которые администратор отметил в админке ("магазин" - "настройки" - "службы доставки" - "автоматизированные" и "настраиваемые")
	\item О магазине - текстовая страница
	\item Соглашение пользователя - текстовая страница
	\item Конфиденциальность - текстовая страница
	\item Новости - управляется соответствующим блоком в администраторской панели (либо отдельный соответствующий модуль битрикса, либо инфоблок - на усмотрение разработчика)
	\item Часто задаваемые вопросы - управляется блоком в админке (инфоблок)
	\item Обратная связь - контактная форма, присылает сообщение на адрес из настроек магазина (проработать возможность подключить битриксовый модуль ТП, т.е. что бы ответы из модуля приходили клиенту на почту)
	\item Регистрация пользователя - клиент должен ввести мэйл и пароль. На почту ему приходит подтверждение о регистрации.
	\item Авторизация - введя логин и пароль, пользователь входит в систему (создается новая сессия).
	\item Забытый пароль - страница позволяет ввести мэйл и восстановить пароль
\end{itemize}

\end{document}








